
<app-header class="component"></app-header>

<div class="supercontainer">

    <div class="year-title-cont">

        <div class="campaignYear" #yearsInBetween>



           <div class="flechita">
                <img (click)="previousYear()" src="../../../assets/img/left-arrow.png" style="scale: 0.3;" class="arrow-left" *ngIf="yearService.currentYear.isFirstYear==0">
            </div>
            <div class="numeritos">
                <p>{{yearService.currentYear.yearNumber}}</p>
            </div>
            <div class="flechita">
                <img (click)="nextYear()" src="../../../assets/img/right-arrow.png" style="scale: 0.3;" class="arrow-right" *ngIf="yearService.currentYear.isLastYear==0">
            </div>

        </div><!-- cierra campaing year -->
        <div class="title">
            <p class="page_title">{{campaignService.currentCampaign.campaign_name}}</p>
            <p class ="page_subtitle">Pantalla principal </p>
        </div>
    </div>
<!-- <form #houseForm="ngForm" (ngSubmit)="onSubmit(houseForm)">  -->
<div class="maincontainer">
    <div class="left">
        <label class="notas">NOTAS:</label>
            <textarea rows="33%" maxlength="5000" style="border: none; resize: none;" #notas>{{yearService.currentYear.notes}}
            </textarea>
    </div>

    <div class="right">
        <div class="player-list">
            <div class="npc_list">
                <!-- Los personajes van apareciendo en esta  -->
            
                <!-- Cabecera -->
                <div class="texto">
                    <span>JUGADOR</span><span>PERSONAJE ACTIVO</span><span>CASA</span><span>EDITAR</span>
                </div>


                <!-- Personajes -->
                <div class="character" style="background-color: rgb(130, 23, 25,0.6);" *ngIf="playerService.playersOfCampaign[0] != null; else emptyPlayer">
                    <span class="span1" (click)="showModalPlayer(playerService.playersOfCampaign[0])">{{playerService.playersOfCampaign[0].player_name}}</span>
                    <span class="span2"(click)="showModalCharacter(houseService.housesOfCamapaign[0].house_id,characterService.mainCharacters[0])">{{characterService.mainCharacters[0].char_name}}</span>
                    <span class="span3"(click)="showModalHouse()">{{houseService.housesOfCamapaign[0].house_name}}</span>
                    <span class="editarIcon" style="width: 6%;">                    
                        <div class="editchar">
                            <img (click)="goCreateHouse()"src="../../../assets/img/PLUMA.png">
                        </div>
                    </span>
                </div>

                <div class="character" style="background-color: rgb(130, 23, 25,0.6);"*ngIf="playerService.playersOfCampaign[1] != undefined; else emptyPlayer">
                    <span class="span1"(click)="showModalPlayer(playerService.playersOfCampaign[1])">{{playerService.playersOfCampaign[1].player_name}}</span>
                    <span class="span2"(click)="showModalCharacter(houseService.housesOfCamapaign[1].house_id,characterService.mainCharacters[1])">{{characterService.mainCharacters[1].char_name}}</span>
                    <span class="span3"(click)="showModalHouse()">{{houseService.housesOfCamapaign[1].house_name}}</span>
                    <span class="editarIcon" style="width: 6%;">                    
                        <div class="editchar">
                            <img (click)="goCreateHouse()" src="../../../assets/img/PLUMA.png">
                        </div>
                    </span>
                </div>

                <div class="character" style="background-color: rgb(130, 23, 25,0.6);" *ngIf="playerService.playersOfCampaign[2] != undefined; else emptyPlayer">
                    <span class="span1"(click)="showModalPlayer(playerService.playersOfCampaign[2])">{{playerService.playersOfCampaign[2].player_name}}</span>
                    <span class="span2"(click)="showModalCharacter(houseService.housesOfCamapaign[2].house_id,characterService.mainCharacters[2])">{{characterService.mainCharacters[2].char_name}}</span>
                    <span class="span3"(click)="showModalHouse()">{{houseService.housesOfCamapaign[2].house_name}}</span>
                    <span class="editarIcon" style="width: 6%;">                    
                        <div class="editchar">
                            <img (click)="goCreateHouse()" src="../../../assets/img/PLUMA.png">
                        </div>
                    </span>
                </div>

                <div class="character" style="background-color: rgb(130, 23, 25,0.6);"*ngIf="playerService.playersOfCampaign[3] != undefined; else emptyPlayer">
                    <span class="span1"(click)="showModalPlayer(playerService.playersOfCampaign[3])">{{playerService.playersOfCampaign[3].player_name}}</span>
                    <span class="span2"(click)="showModalCharacter(houseService.housesOfCamapaign[3].house_id,characterService.mainCharacters[3])">{{characterService.mainCharacters[3].char_name}}</span>
                    <span class="span3"(click)="showModalHouse()">{{houseService.housesOfCamapaign[3].house_name}}</span>
                    <span class="editarIcon" style="width: 6%;">                    
                        <div class="editchar">
                            <img (click)="goCreateHouse()" src="../../../assets/img/PLUMA.png">
                        </div>
                    </span>
                </div>

                <div class="character" style="background-color: rgb(130, 23, 25,0.6);"*ngIf="playerService.playersOfCampaign[4] != undefined; else emptyPlayer">
                    <span class="span1"(click)="showModalPlayer(playerService.playersOfCampaign[4])">{{playerService.playersOfCampaign[4].player_name}}</span>
                    <span class="span2"(click)="showModalCharacter(houseService.housesOfCamapaign[4].house_id,characterService.mainCharacters[4])">{{characterService.mainCharacters[4].char_name}}</span>
                    <span class="span3"(click)="showModalHouse()">{{houseService.housesOfCamapaign[4].house_name}}</span>
                    <span class="editarIcon" style="width: 6%;">                    
                        <div class="editchar">
                            <img (click)="goCreateHouse()" src="../../../assets/img/PLUMA.png">
                        </div>
                    </span>
                </div>

                <div class="character"style="background-color: rgb(130, 23, 25,0.6);"*ngIf="playerService.playersOfCampaign[5] != undefined; else emptyPlayer">
                    <span class="span1"(click)="showModalPlayer(playerService.playersOfCampaign[5])">{{playerService.playersOfCampaign[5].player_name}}</span>
                    <span class="span2"(click)="showModalCharacter(houseService.housesOfCamapaign[5].house_id,characterService.mainCharacters[5])">{{characterService.mainCharacters[5].char_name}}</span>
                    <span class="span3"(click)="showModalHouse(houseService.housesOfCamapaign[5])">{{houseService.housesOfCamapaign[5].house_name}}</span>
                    <span class="editarIcon" style="width: 6%;">                    
                        <div class="editchar">
                            <img (click)="goCreateHouse()" src="../../../assets/img/PLUMA.png">
                        </div>
                    </span>
                </div>



            <ng-template #emptyPlayer>
                <div class="emptycharacter" style="background-color: rgb(130, 23, 25,0.6);">
                    <span (click)="goNewPlayer()">AÃ‘ADIR NUEVO JUGADOR</span>
                </div>
            </ng-template>

                </div>
        </div>


        <div class="buttons" *ngIf="yearService.currentYear.isLastYear==1; else noNext">
            <button (click)="goNext(notas.value)">FASE DE INVIERNO</button>
        </div>


        <ng-template #noNext>
            <div></div>
        </ng-template>
    </div>



</div>
<!-- </form> -->
</div>


<app-new-player-name-modal class="modal" [hidden]="isnewPlayerNameHide"  (cambioNombre)="changeName($event)"></app-new-player-name-modal>
<app-change-character-modal class="modal" [hidden]="isChangeCharacterHide" [charactersPadre]="characters" (eventoChangeCharacter)="changeCharacter($event)"></app-change-character-modal>
<app-house-info-modal class="modal" [hidden]="isHouseInfoHide"></app-house-info-modal>

<!-- MODAL DE NOMBRE DE JUGADOR -->
<!-- <div class="modal" id="modal" [hidden]="isnewPlayerNameHide">
    <div class="modal-bg" (click)="showModalPlayer()">

    </div>
    <div class="modal-content">
        <div class="contenido">
            <a (click)="showModalPlayer()" class="modal-exit">x</a>
            <h3 class="modal-title">Introduce un nuevo nombre para el jugador</h3>
            <input class="input" type="text" name="" id="" placeholder="Nombre de Jugador" #nombre>
            <button class="small_button" (click)="changeName(nombre.value)">OK</button>    
        </div>
    </div>
</div> -->

<!-- MODAL DE CAMBIAR DE PERSONAJE -->
<!-- <div class="modal2" id="modal" [hidden]="isChangeCharacterHide">
    <div class="modal-bg" (click)="showModalCharacter()">

    </div>
    <div class="modal-content2">
        <div class="contenido2">
            <a (click)="showModalCharacter()" class="modal-exit">x</a>
            <form class="formContain">
                <h3>Cambia el personaje</h3>
                <label for="">Seleciona el personaje</label>
                <select name="data" class="select" #data>
                    <option *ngFor="let pnj of characterService.currentHouseChars" [value]="pnj">{{pnj}}</option>
                </select>
            </form>
            <div class="buttonContain">
                <button class="small_button" (click)="changePJ(data.value)">OK</button>
            </div>
    </div>
</div> -->

<!-- MODAL DE INFORMACION DE LA CASA -->
<!-- <div class="modal3" id="modal3" [hidden]="isHouseInfoHide">
    <div class="modal-bg" (click)="showModalHouse()">

    </div>
    <div class="modal-content3">
        <div class="infoContain">
            <img [src]="houseService.currentHouse.shield" alt="">
            <p class="nombreCasa">{{this.houseService.currentHouse.house_name}}</p>
            <p class="info">de {{this.playerService.currentPlayer.player_name}}</p>
            <p class="info">{{this.houseService.currentHouse.familyCharacteristic}}</p>
            <p class="pj">Personaje activo: <span class="pj2">Sir {{houseService.currentHouse.activeChar}}</span></p>
            <p class="otherPj">-Otros miembros de la casa-<br></p>
        </div>
        
        <div [ngClass]="'prueba'" [(ngModel)]="characterService.currentHouseChars" class="contenedorTexto">
            <div class="header">
                <span class="name_header">Nombre</span>
                <span class="role_header">Rol</span>
            </div>

            <div *ngFor="let pnj of characterService.currentHouseChars" >
                <div *ngIf="pnj.estado === true; else muerto">
                <div class="char_container">
                    <span class="char_name" [ngClass]="'vivo'">{{pnj.nombre}}</span>
                    <span class="char_role"> {{pnj.rol}}</span>
                </div>
                </div>
                <ng-template #muerto>
                <div class="char_container">
                    <span class="char_name"> <p class="muerto">{{pnj.nombre}}</span>
                    <span class="char_role">{{pnj.rol}}</span>
                </div>
                </ng-template>
            </div>
        </div>
        
    </div>
</div> -->